<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DAYS TO HALLOWEEN</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <main>
        <p>
            <span class="day frame">0</span>
            <span class="day frame">0</span>
            <span class="day frame">0</span>
        </p>
        <p id="legend" class="frame">DAYS TO <span id="halloween">HALLOWEEN</span><span id="xmas">XMAS</span></p>
    </main>
    <audio autoplay="true" src="assets/audio/song.mp3" />
    <script>
        const $days = document.getElementsByClassName('day');
        const $xmas = document.getElementById('xmas');

        const today = new Date();
        const halloween = new Date('10/31/2021');
        const christmas = new Date('12/24/2021');


        let truc = true;

        let daysBeforeHalloween = Math.ceil(Math.abs(halloween - today) / (1000 * 60 * 60 * 24));
        let daysBeforeXmas = Math.ceil(Math.abs(christmas - today) / (1000 * 60 * 60 * 24));

        function halloweenMode () {
            let days = daysBeforeHalloween;

            if (daysBeforeHalloween < 100) {
                days = '0' + daysBeforeHalloween;
            }

            document.title = days + ' DAYS TO HALLOWEEN'
            $xmas.style.display = 'none';
            displayDays(days)
            truc = true
        }

        function christmasMode () {
            let days = daysBeforeXmas;

            if (daysBeforeXmas < 100) {
                days = '0' + daysBeforeXmas;
            }

            document.title = days + ' DAYS TO XMAS'
            $xmas.style.display = 'inline-block';
            displayDays(days)

            truc=false
        }

        function displayDays (days)
        {
            let toDisplay = '' + days.split('');
            console.log(toDisplay);

            for (let i = 0 ; i < days.length ; i++) {
                console.log(i);
                console.log($days[i]);
                $days[i].innerText = days[i];
            }
        }

        document.body.onkeyup = (event) => {
            if(event.keyCode == 32 || event.key === ' '){
                if (truc === true) {
                    christmasMode();
                } else {
                    halloweenMode();
                }
            }

        }

        halloweenMode();

    </script>

</body>
</html>